function decorateMethodBeforeAndAfter(object, methodName, beforeMethod, afterMethod) {
    var oldMethod = object[methodName];
    if(!oldMethod) throw new Error('There is no method here to decorate.');
    var newMethod = function() {
        beforeMethod.apply(this, arguments);
        var results = oldMethod.apply(object, arguments);
        afterMethod.apply(this, arguments);
        return results;
    }
    object[methodName] = newMethod;
    return {
        object: object,
        methodName: methodName,
        originalMethod: oldMethod
    };
}

module.exports = decorateMethodBeforeAndAfter;
