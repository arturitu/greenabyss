var decorateMethodAfter = require('utils/decorateMethodAfter');

function manageSceneOnResizeObjects(scene) {
	var objectsWithOnResize = [];
	var width = window.innerWidth;
	var height = window.innerHeight;
	decorateMethodAfter(scene, 'add', function(item) {
		if(item.onResize && objectsWithOnResize.indexOf(item) === -1) {
			objectsWithOnResize.push(item);
			item.onResize(width, height);
		}
	});
	decorateMethodAfter(scene, 'remove', function(item) {
		var index = objectsWithOnResize.indexOf(item);
		if(index !== -1) {
			objectsWithOnResize.splice(index, 1);
		}
	});
	function onResize(w, h) {
		width = w;
		height = h;
		for (var i = objectsWithOnResize.length - 1; i >= 0; i--) {
			objectsWithOnResize[i].onResize(w, h);
		}
	}
	scene.onResize = onResize;
}

module.exports = manageSceneOnResizeObjects;